<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Change Profile Pic</title>
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" crossorigin="anonymous">
    <script th:src="@{/webjars/jquery/3.0.0/jquery.min.js}" src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
            crossorigin="anonymous"></script>
    <script th:src="@{/webjars/popper.js/1.12.9/popper.min.js}"
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" crossorigin="anonymous"
            th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
</head>
<body>
<div class="container">
    <div th:insert="home/homepage::homepage"></div>
    <div class="w-50 m-auto">
        <img class="img-fluid rounded-circle" id="target" src="../../static/pic.jpg" th:src="@{|/profile/${email}/pic|}"
             alt="Not Found">
        <form method="post" th:action="@{|/profile/${email}/changePic|}" enctype="multipart/form-data">
            <input type="hidden" th:value="${email}" name="email">
            <input type="file" onchange="readURL(this)" name="image" accept="image/png, image/jpeg"
                   class="btn btn-outline-success form-control-file m-2">
            <button class="btn btn-block btn-success m-2">Modify</button>
        </form>
    </div>
    <script>

        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#target').attr('src', e.target.result);
                    /* document.getElementByClassName('blah').setAttribute('src',e.target.result); */
                };

                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>
</div>
</body>
</html>